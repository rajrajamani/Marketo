#{extends 'main.html' /} #{form @Application.changePassword()}
<input type="text" name="munchkinId" id="munchkinId"
	value="${placeholder}" maxlength="50" size="25"
	style="font-size: 16px" />
<br />
<input type="password" name="cpw" id="cpw"
	placeholder="Current Password" maxlength="50" size="25"
	style="font-size: 16px" />
<br />
<input type="password" name="pw1" id="pw1" placeholder="Password"
	maxlength="50" size="25" style="font-size: 16px" />
<br />
<input type="password" name="pw2" id="pw2"
	placeholder="Re-enter Password" maxlength="50" size="25"
	style="font-size: 16px" />
<br />
<input type="text" name="suid" id="suid"
	placeholder="SOAP User ID" maxlength="50" size="25"
	style="font-size: 16px" />
<br />
<input type="password" name="skey" id="skey"
	placeholder="SOAP Enc Key" maxlength="50" size="25"
	style="font-size: 16px" />
<br />
<input id="submit" type="submit" value="Register" />

#{/form}

<script>
	jQuery(function() {
		$("#submit")
				.click(
						function() {
							$(".error").hide();
							var hasError = false;
							var noPass = false;
							var noSOAP = false;
							
							var munchVal = $("#munchkinId").val();
							var currPwVal = $("#cpw").val(); 
							var passwordVal = $("#pw1").val(); 
							var checkPassVal = $("#pw2").val();
							var suiVal = $("#suid").val();
							var skeyVal = $("#skey").val();
							
							if (munchVal == '') {
								$("#munchkinId")
										.after(
												'<div class="alert-box alert">Please provide your munchkin Id</span>');
								hasError = true;
							} else if (currPwVal == '') {
								$("#cpw")
										.after(
												'<div class="alert-box alert">Please enter your current password.</span>');
								hasError = true;
							} 
							
							if (passwordVal == '' || checkPassVal == "") {
								noPass = true;
							} 
							
							if (suiVal == '' || skeyVal == '') {
								noSOAP = true;
							} 

							
							if (noPass == true && noSOAP == true) {
								$("#pw1")
								.after(
										'<div class="alert-box alert">Please enter new password (or) SOAP credentials.</span>');
								hasError = true;
							}
							
							if (noPass == false && passwordVal != checkVal) {
								$("#pw2")
										.after(
												'<div class="alert-box alert">Passwords do not match.</span>');
								hasError = true;
							} 
							
							if (hasError == true) {
								return false;
							}
						});
	});
</script>

